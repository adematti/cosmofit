pipeline:
  QSO:
    like:
      class: cosmofit.likelihoods.PowerSpectrumMultipolesLikelihood
      init:
        data: pk/data.npy
        covariance: pk/mock_*.npy
        #wmatrix: pk/window.npy
        klim:
          0: [0.05, 0.2]
          2: [0.05, 0.2]
        krebin: 2
        zeff: 2.0
        fiducial: DESI
      save_fn: f'{filesystem}QSO.like.npy'
      load_fn: True
    theory:
      class: cosmofit.theories.bao.Beutler2017BAOGalaxyPowerSpectrum
      params:
        sigmar:
          value: .inf
        al[:5:2]_[-3:2]:
          fixed: True
        al[:5:2]_[0:2]:
          fixed: False
    effectap:
      class: cosmofit.theories.base.EffectAP
      init:
        mode: qparqper
  cosmo:
    class: cosmofit.theories.primordial_cosmology.Cosmoprimo
    #init:
    #  fiducial: DESI
    params:
      fixed: '*'

run:
  source:
    #profiles: profiles.npy
    chain: chain_0.npy
  plot:
    QSO.like:
      fn: power.png

sample:
  class: cosmofit.samplers.DynestySampler
  init:
    mode: static
  run:
    max_iterations: 10000
    check_every: 100
  check: True

sample:
  class: cosmofit.samplers.EmceeSampler
  init:
    nwalkers: 40
  run:
    max_iterations: 10000
    check_every: 100
  check: True

profile:
  class: cosmofit.profilers.MinuitProfiler

filesystem: tmp/
